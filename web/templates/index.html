<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A股智能投资分析系统</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>📊</text></svg>">
</head>
<body>
    <div class="app-container">
        <!-- 页面头部 -->
        <header class="app-header">
            <div class="container">
                <div class="header-content">
                    <div class="brand">
                        <h1 class="brand-title">📊 A股智能投资分析系统</h1>
                        <p class="brand-subtitle">基于AI的多维度股票分析平台</p>
                    </div>
                    <div class="connection-status">
                        <div class="status-indicator" id="statusIndicator"></div>
                        <span class="status-text" id="statusText">未连接</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <div class="container">
                <!-- 搜索区域 -->
                <section class="search-section">
                    <!-- 选项卡切换 -->
                    <div class="tabs">
                        <button class="tab-btn active" data-tab="stock">股票分析</button>
                        <button class="tab-btn" data-tab="sector">板块分析</button>
                    </div>
                    
                    <!-- 股票分析搜索 -->
                    <div class="search-container" id="stockSearchContainer">
                        <div class="search-form">
                            <div class="input-group">
                                <label for="stockCode" class="input-label">股票代码</label>
                                <div class="autocomplete-wrapper">
                                    <input type="text" id="stockCode" placeholder="请输入6位股票代码（如：600519）" maxlength="6" autocomplete="off" class="stock-input">
                                    <div class="autocomplete-dropdown" id="autocompleteDropdown"></div>
                                </div>
                            </div>
                            <div class="button-group">
                                <button id="analyzeBtn" class="btn btn-primary">
                                    <span class="btn-icon">🚀</span>
                                    <span class="btn-text">开始分析</span>
                                </button>
                                <button id="clearBtn" class="btn btn-secondary">
                                    <span class="btn-icon">🗑️</span>
                                    <span class="btn-text">清除历史</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 板块分析搜索 -->
                    <div class="search-container" id="sectorSearchContainer" style="display: none;">
                        <div class="search-form">
                            <div class="input-group">
                                <label for="sectorCategory" class="input-label">板块分类</label>
                                <div class="sector-select-container">
                                    <select id="sectorCategory" class="sector-select">
                                        <option value="">请选择板块分类</option>
                                        <!-- 动态生成分类选项 -->
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="sectorName" class="input-label">板块名称</label>
                                <div class="autocomplete-wrapper">
                                    <input type="text" id="sectorName" placeholder="请输入板块名称（如：白酒）" autocomplete="off" class="stock-input">
                                    <div class="autocomplete-dropdown" id="sectorAutocompleteDropdown"></div>
                                </div>
                            </div>
                            <div class="button-group">
                                <button id="analyzeSectorBtn" class="btn btn-primary">
                                    <span class="btn-icon">🏢</span>
                                    <span class="btn-text">开始板块分析</span>
                                </button>
                                <button id="clearSectorBtn" class="btn btn-secondary">
                                    <span class="btn-icon">🗑️</span>
                                    <span class="btn-text">清除历史</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 分析进度区域 -->
                <section class="progress-section" id="progressSection">
                    <div class="progress-container">
                        <h2 class="section-title">分析进度</h2>
                        <div class="overall-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="overallProgressFill"></div>
                            </div>
                            <span class="progress-percentage" id="overallProgressPercentage">0%</span>
                            <span class="progress-status" id="overallProgressStatus">等待开始...</span>
                        </div>
                        <div class="agent-status-list" id="agentStatusList">
                            <!-- 动态生成的分析师状态 -->
                        </div>
                    </div>
                </section>

                <!-- 图表区域 -->
                <section class="chart-section" id="chartSection" style="display: none;">
                    <div class="chart-container">
                        <h2 class="section-title">股票走势图</h2>
                        <div class="chart-info">
                            <div class="stock-info">
                                <span class="stock-name" id="stockName">--</span>
                                <span class="stock-code" id="stockCodeDisplay">--</span>
                                <span class="current-price" id="currentPrice">--</span>
                                <span class="price-change" id="priceChange">--</span>
                            </div>
                            <div class="chart-controls">
                                <button class="chart-period-btn active" data-period="daily">日K</button>
                                <button class="chart-period-btn" data-period="weekly">周K</button>
                                <button class="chart-period-btn" data-period="monthly">月K</button>
                            </div>
                        </div>
                        <div id="klineChart" class="chart-wrapper"></div>
                    </div>
                </section>

                <!-- 分析结果区域 -->
                <section class="results-section" id="resultsSection" style="display: none;">
                    <h2 class="section-title">分析结果</h2>
                    <div class="agents-grid" id="agentsGrid">
                        <!-- 动态生成的分析师卡片 -->
                    </div>
                </section>

                <!-- 最终建议区域 -->
                <section class="summary-section" id="summarySection" style="display: none;">
                    <div class="summary-container">
                        <h2 class="section-title">最终投资建议</h2>
                        <div class="recommendation-badge" id="recommendationBadge">
                            <span class="badge-text">分析中...</span>
                        </div>
                        <div class="summary-cards">
                            <div class="summary-card">
                                <div class="card-icon">📈</div>
                                <div class="card-content">
                                    <div class="card-label">综合评分</div>
                                    <div class="card-value" id="scoreValue">--</div>
                                </div>
                            </div>
                            <div class="summary-card">
                                <div class="card-icon">⚠️</div>
                                <div class="card-content">
                                    <div class="card-label">风险等级</div>
                                    <div class="card-value" id="riskValue">--</div>
                                </div>
                            </div>
                            <div class="summary-card">
                                <div class="card-icon">💼</div>
                                <div class="card-content">
                                    <div class="card-label">建议仓位</div>
                                    <div class="card-value" id="positionValue">--</div>
                                </div>
                            </div>
                            <div class="summary-card">
                                <div class="card-icon">🎯</div>
                                <div class="card-content">
                                    <div class="card-label">目标价位</div>
                                    <div class="card-value" id="targetValue">--</div>
                                </div>
                            </div>
                        </div>
                        <div class="summary-content" id="summaryContent">
                            <!-- 动态生成的最终建议内容 -->
                        </div>
                    </div>
                </section>

                <!-- 历史记录区域 -->
                <section class="history-section">
                    <div class="history-container">
                        <h2 class="section-title">历史分析记录</h2>
                        <div class="history-list" id="historyList">
                            <p class="no-history">暂无历史记录</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- 通知容器 -->
        <div class="notification-container" id="notificationContainer"></div>
    </div>

    <!-- 主脚本 -->
    <script src="/static/js/modules/chartManager.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>